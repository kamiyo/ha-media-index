# Media Index Services

get_random_items:
  name: Get Random Media Items
  description: Get random media items from the index with optional filtering
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    count:
      name: Count
      description: Number of random items to return
      example: 10
      default: 1
      selector:
        number:
          min: 1
          max: 100
          mode: box
    folder:
      name: Folder
      description: Optional folder path to filter by (relative to base folder)
      example: "Photos/2023"
      selector:
        text:
    file_type:
      name: File Type
      description: Filter by file type (image or video)
      example: "image"
      selector:
        select:
          options:
            - "image"
            - "video"
    date_from:
      name: Date From
      description: Filter files modified after this date (YYYY-MM-DD)
      example: "2023-01-01"
      selector:
        date:
    date_to:
      name: Date To
      description: Filter files modified before this date (YYYY-MM-DD)
      example: "2023-12-31"
      selector:
        date:

get_file_metadata:
  name: Get File Metadata
  description: Get detailed metadata for a specific file
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    file_path:
      name: File Path
      description: Full path to the media file
      required: true
      example: "/media/Photos/vacation.jpg"
      selector:
        text:

geocode_file:
  name: Geocode File
  description: Get location name for a file with GPS coordinates (cache-first, on-demand)
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    file_id:
      name: File ID
      description: Database ID of the file to geocode
      required: false
      selector:
        number:
          min: 1
          mode: box
    latitude:
      name: Latitude
      description: GPS latitude (alternative to file_id)
      required: false
      selector:
        number:
          min: -90
          max: 90
          mode: box
    longitude:
      name: Longitude
      description: GPS longitude (alternative to file_id)
      required: false
      selector:
        number:
          min: -180
          max: 180
          mode: box

scan_folder:
  name: Scan Folder
  description: Manually trigger a folder scan
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    folder_path:
      name: Folder Path
      description: Folder to scan (defaults to base folder if not specified)
      example: "/media/Photos"
      selector:
        text:
    force_rescan:
      name: Force Rescan
      description: Force re-scan of all files even if unchanged
      default: false
      selector:
        boolean:

mark_favorite:
  name: Mark File as Favorite
  description: Mark a file as favorite (updates EXIF and database)
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    file_path:
      name: File Path
      description: Full path to the media file
      required: true
      example: "/media/Photo/PhotoLibrary/New/IMG_1234.jpg"
      selector:
        text:
    is_favorite:
      name: Is Favorite
      description: True to mark as favorite, False to unmark
      default: true
      selector:
        boolean:

delete_media:
  name: Delete Media File
  description: Move a media file to the junk folder (soft delete)
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    file_path:
      name: File Path
      description: Full path to the media file to delete
      required: true
      example: "/media/Photo/PhotoLibrary/New/IMG_1234.jpg"
      selector:
        text:

mark_for_edit:
  name: Mark File for Editing
  description: Move a media file to the edit folder for processing
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    file_path:
      name: File Path
      description: Full path to the media file to mark for editing
      required: true
      example: "/media/Photo/PhotoLibrary/New/IMG_1234.jpg"
      selector:
        text:

restore_edited_files:
  name: Restore Edited Files
  description: Restore files from the edit folder back to their original locations
  target:
    entity:
      integration: media_index
      domain: sensor
  fields:
    folder_filter:
      name: Folder Filter
      description: Filter by destination folder (defaults to "_Edit")
      default: "_Edit"
      example: "_Edit"
      selector:
        text:
    file_path:
      name: File Path
      description: Optional - restore only this specific file
      example: "/media/Photo/PhotoLibrary/_Edit/IMG_1234.jpg"
      selector:
        text:
